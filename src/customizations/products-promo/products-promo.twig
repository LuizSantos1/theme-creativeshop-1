<section>
        {% set items = [] %}

        {% for product in products %}
            {% set isOutOfStock = product.stock ? false : true %}

            {% set content %}
                {% include locate( 'grid-product/grid-product.twig' ) with {
                    namespace: 'cs-',
                    showWrapper: false,
                    url: product.url,
                    image: {
                        src: product.image,
                        alt: product.name,
                    },
                    name: product.name,
                    price: {
                        content: product.price
                    },
                    addons: { 
                        show: true
                    },
                    swatches: {
                        mix: 'cs-grid-product__swatches--color-only',
                        asAddon: false,
                        content: product.swatches
                    },
                    rating: product.rating.data,
                    stock: {
                        showInStock: product.stock,
                        showOutOfStock: isOutOfStock,
                        inStockContent: 'In stock',
                        outOfStockContent: 'Out of stock'
                    },
                    hotspots: {
                        after: {
                            inStock: {
                                content: '<ul class="cs-links-block-addto" data-role="add-to-links"><li class="cs-links-block-addto__item"><a href="#" class="cs-links-block-addto__link towishlist" title="Add to Wish List" aria-label="Add to Wish List" data-action="add-to-wishlist" data-post=' ~ product.wishlist ~ ' role="button"><svg class="cs-links-block-addto__icon cs-links-block-addto__icon--wishlist"><use xlink:href=' ~ asset( 'images/sprites.svg#heart' ) ~'></use></svg>Add to Wish List</a></li></ul>'
                            }
                        }
                    }
                } %}
            {% endset %}


            {% set items = items|merge( [ {
                mix: 'cs-grid-product cs-grid-product--in-carousel',
                content: content
            } ] ) %}
        {% endfor %}

        {% include locate('components/products-promo/products-promo.twig') with {
            namespace: 'cs-',
            showPagination: true,
            showNavigation: true,
            products: items
        } %}
</section>
